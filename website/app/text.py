phone_to_id = {'_': 0, '~': 1, 'a': 2, 'a1': 3, 'a2': 4, 'a3': 5, 'a4': 6, 'ai': 7, 'ai1': 8, 'ai2': 9, 'ai3': 10, 'ai4': 11, 'an': 12, 'an1': 13, 'an2': 14, 'an3': 15, 'an4': 16, 'ang': 17, 'ang1': 18, 'ang2': 19, 'ang3': 20, 'ang4': 21, 'ao': 22, 'ao1': 23, 'ao2': 24, 'ao3': 25, 'ao4': 26, 'b': 27, 'bi1': 28, 'c': 29, 'ch': 30, 'd': 31, 'e': 32, 'e1': 33, 'e2': 34, 'e3': 35, 'e4': 36, 'ei': 37, 'ei1': 38, 'ei2': 39, 'ei3': 40, 'ei4': 41, 'en': 42, 'en1': 43, 'en2': 44, 'en3': 45, 'en4': 46, 'eng': 47, 'eng1': 48, 'eng2': 49, 'eng3': 50, 'eng4': 51, 'er': 52, 'er2': 53, 'er3': 54, 'er4': 55, 'f': 56, 'g': 57, 'h': 58, 'i': 59, 'i1': 60, 'i2': 61, 'i3': 62, 'i4': 63, 'ia': 64, 'ia1': 65, 'ia2': 66, 'ia3': 67, 'ia4': 68, 'ian': 69, 'ian1': 70, 'ian2': 71, 'ian3': 72, 'ian4': 73, 'iang': 74, 'iang1': 75, 'iang2': 76, 'iang3': 77, 'iang4': 78, 'iao': 79, 'iao1': 80, 'iao2': 81, 'iao3': 82, 'iao4': 83, 'ie': 84, 'ie1': 85, 'ie2': 86, 'ie3': 87, 'ie4': 88, 'in': 89, 'in1': 90, 'in2': 91, 'in3': 92, 'in4': 93, 'ing': 94, 'ing1': 95, 'ing2': 96, 'ing3': 97, 'ing4': 98, 'iong1': 99, 'iong2': 100, 'iong3': 101, 'iu': 102, 'iu1': 103, 'iu2': 104, 'iu3': 105, 'iu4': 106, 'j': 107, 'k': 108, 'l': 109, 'm': 110, 'n': 111, 'n2': 112, 'o': 113, 'o1': 114, 'o2': 115, 'o3': 116, 'o4': 117, 'ong': 118, 'ong1': 119, 'ong2': 120, 'ong3': 121, 'ong4': 122, 'ou': 123, 'ou1': 124, 'ou2': 125, 'ou3': 126, 'ou4': 127, 'p': 128, 'pi1': 129, 'q': 130, 'r': 131, 's': 132, 'sh': 133, 't': 134, 'u': 135, 'u1': 136, 'u2': 137, 'u3': 138, 'u4': 139, 'ua': 140, 'ua1': 141, 'ua2': 142, 'ua3': 143, 'ua4': 144, 'uai': 145, 'uai1': 146, 'uai2': 147, 'uai3': 148, 'uai4': 149, 'uan': 150, 'uan1': 151, 'uan2': 152, 'uan3': 153, 'uan4': 154, 'uang': 155, 'uang1': 156, 'uang2': 157, 'uang3': 158, 'uang4': 159, 'ue1': 160, 'ue2': 161, 'ue3': 162, 'ue4': 163, 'ui1': 164, 'ui2': 165, 'ui3': 166, 'ui4': 167, 'un': 168, 'un1': 169, 'un2': 170, 'un3': 171, 'un4': 172, 'uo': 173, 'uo1': 174, 'uo2': 175, 'uo3': 176, 'uo4': 177, 'v2': 178, 'v3': 179, 'v4': 180, 'vè0': 181, 'w': 182, 'x': 183, 'y': 184, 'z': 185, 'zh': 186, '。': 187, '！': 188, '，': 189, '？': 190}


def text_to_sequence(text):
    if type(text) == str:
        text = text.split(' ')
    
    sequence = []
    for w in text:
        if w in phone_to_id:
            sequence.append(phone_to_id[w])

    # Append EOS token
    sequence.append(phone_to_id['~'])
    
    return sequence
